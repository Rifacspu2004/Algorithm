#include <stdio.h>
#include <stdlib.h>

typedef struct {int u,v,w;} E;
int p[1000],r[1000];

int f(int x){ return p[x]==x?x:(p[x]=f(p[x])); }
void u(int a,int b){ a=f(a); b=f(b); if(r[a]<r[b]) p[a]=b; else { p[b]=a; if(r[a]==r[b]) r[a]++; } }
int cmp(const void *a,const void *b){ return ((E*)a)->w - ((E*)b)->w; }

int main(){
    int n,m,i;
    printf("Enter number of vertices: ");
    scanf("%d",&n);
    printf("Enter number of edges: ");
    scanf("%d",&m);
    E e[m];
    for(i=0;i<n;i++) p[i]=i;
    printf("Enter each edge in format: u v w\n");
    for(i=0;i<m;i++) scanf("%d%d%d",&e[i].u,&e[i].v,&e[i].w);
    qsort(e,m,sizeof(E),cmp);
    printf("Edges in MST:\n");
    for(i=0;i<m;i++)
        if(f(e[i].u)!=f(e[i].v)){
            u(e[i].u,e[i].v);
            printf("%d %d %d\n", e[i].u, e[i].v, e[i].w);
        }
    return 0;
}
